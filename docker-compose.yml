version: "3.8"

services:
    backend:
        build: ./backend
        container_name: exo-backend
        restart: always
        ports:
            - "8000:8000"
        env_file:
            - .env
        environment:
            - DATABASE_URL=${DATABASE_URL}
            - SECRET_KEY=${SECRET_KEY}
            - GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
            - GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
            - HUGGINGFACE_API_KEY=${HUGGINGFACE_API_KEY}

    frontend:
        image: node:18-alpine
        container_name: exo-frontend
        working_dir: /app
        volumes:
            - ./frontend:/app
        ports:
            - "5173:5173"
        command: sh -c "npm install && npm run dev -- --host"
        environment:
            - VITE_API_URL=http://localhost:8000
